import{v as ee,g as te,c as ae,_ as le}from"./index.d740cb91.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import{d as oe,r as u,bW as B,c as D,a$ as se,C as i,D as r,aI as l,aH as o,G as s,aN as n,aM as f,aF as v,bH as ne,aE as E,aK as ie,aJ as ue,aR as re,ba as ce,bV as de,bZ as ve,b6 as _e,a0 as me,aY as pe,bb as fe,bj as ge,bM as he,c6 as ye,bk as be,be as we,bf as Se}from"./arco.a9e9ea8e.js";import{q as ke,a as Ie,g as $e,b as xe,u as Ce}from"./evaluate.a23513de.js";import{l as je}from"./dataset.9f6bf8bd.js";import"./chart.095b9a7e.js";import"./vue.6f0b04ed.js";import"./user-info.e23f06cc.js";const Le=g=>(we("data-v-bfaf22be"),g=g(),Se(),g),Me={class:"container"},Ae={class:"custom-title"},Te={class:"boxTest"},Ve={class:"contentTest"},Be={class:"boxTest"},De={class:"contentTest"},Ee={class:"boxTest"},Re={class:"contentTest"},ze=Le(()=>s("br",null,null,-1)),Ne={id:"selectModel",style:{"margin-bottom":"20px","margin-left":"21vw",transition:"margin-left 0.5s ease-out"}},qe={class:"text-box"},Ge={key:0,class:"box-header"},Pe={style:{"font-size":"13px"}},Fe={key:1,class:"QA"},Qe={key:0,class:"userQuestion"},He={key:1},Oe={style:{"font-size":"2vh","font-weight":"bolder"}},Ue={style:{display:"flex","align-items":"center","justify-content":"center"}},Je={style:{"font-size":"2vh","font-weight":"bolder","margin-top":"3vh"}},Ke={key:0,style:{display:"flex","align-items":"center","justify-content":"center","margin-top":"9vh",color:"#1c61ff","font-size":"1.5vh","font-weight":"bold"}},We={key:1,style:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"center","margin-top":"2vh"}},Ye={key:0},Ze={key:1},Xe=oe({__name:"index",async setup(g){let d,h;const{t:x}=ee.exports.useI18n(),C=u(),j=u(),t=u(),y=u(),b=u(),_=u(),w=u(),L=u(),a=u(0),M=u(),S=u(0);C.value=([d,h]=B(()=>ke()),d=await d,h(),d).data,j.value=([d,h]=B(()=>Ie()),d=await d,h(),d).data;const R=D(()=>(C.value||[]).map(e=>({label:e.name,value:e.id}))),z=D(()=>(j.value||[]).map(e=>({label:e.name,value:e.id}))),N=()=>{if(y.value===void 0||b.value===void 0){re.error({title:x("evaluation.select.error.title"),content:x("evaluation.select.error.content")});return}document.getElementById("selectPanel").style.marginLeft="0",document.getElementById("selectModel").style.marginLeft="0",_.value=y.value,w.value=b.value,setTimeout(()=>{je(w.value).then(e=>{t.value=e}),$e(_.value.toString()).then(e=>{L.value=e})},500)},q=()=>{a.value=a.value?a.value-1:a.value,S.value=t.value[a.value].getScore()},G=()=>{a.value=a.value<t.value.length?a.value+1:a.value,S.value=t.value[a.value].getScore()},P=async()=>{t.value[a.value].setAnswerGenerated(),t.value[a.value].setAnswer("..."),await xe(te(),t.value[a.value].getPrompt(),t.value[a.value],_.value,M)},F=e=>{t.value[a.value].getAnswerGenerated()&&(t.value[a.value].setScore(e),S.value=e,t.value[a.value].setScored())},Q=()=>{let e=0;for(let c=0;c<t.value.length;c+=1)e+=t.value[c].getScore();e/=t.value.length,Ce({llmId:_.value,datasetId:w.value,credit:e})},H=e=>{e.style.opacity=0},O=(e,c)=>{requestAnimationFrame(()=>{e.style.transition="opacity 0.5s ease",e.style.opacity=1,c()})};return(e,c)=>{const U=se("Breadcrumb"),k=ce,A=de,T=ve,I=_e,J=me,p=pe,K=fe,W=ae,$=ge,Y=he,Z=ye,V=be;return i(),r("div",Me,[l(U,{items:["menu.evaluate","menu.evaluate.subjective"]},null,8,["items"]),l(V,{gutter:20,align:"stretch"},{default:o(()=>[l($,{span:24},{default:o(()=>[l(A,{class:"general-card"},{title:o(()=>[s("div",Ae,[s("b",null,n(e.$t("evaluation.subjective.rules.title")),1)])]),default:o(()=>[l(k,{direction:"vertical",size:"large"},{default:o(()=>[s("div",Te,[s("div",Ve,[s("h3",null,n(e.$t("evaluation.subjective.rules.1")),1)])]),s("div",Be,[s("div",De,[s("h3",null,n(e.$t("evaluation.subjective.rules.2")),1)])]),s("div",Ee,[s("div",Re,[s("h3",null,n(e.$t("evaluation.subjective.rules.3")),1)])])]),_:1})]),_:1}),ze,l(A,{class:"resultShow"},{default:o(()=>[s("div",Ne,[l(K,{layout:"inline"},{default:o(()=>[l(I,null,{default:o(()=>[l(T,{modelValue:y.value,"onUpdate:modelValue":c[0]||(c[0]=m=>y.value=m),options:R.value,style:{width:"15vw","margin-right":"10px"},placeholder:e.$t("evaluation.select.models")},null,8,["modelValue","options","placeholder"])]),_:1}),l(I,null,{default:o(()=>[l(T,{modelValue:b.value,"onUpdate:modelValue":c[1]||(c[1]=m=>b.value=m),options:z.value,style:{width:"15vw"},placeholder:e.$t("evaluation.select.datasets")},null,8,["modelValue","options","placeholder"])]),_:1}),l(I,null,{default:o(()=>[l(p,{"html-type":"submit",type:"primary",style:{"margin-left":"10px"},onClick:N},{icon:o(()=>[l(J)]),default:o(()=>[f(" "+n(e.$t("evaluation.select.models.confirm")),1)]),_:1})]),_:1})]),_:1})]),l(V,{gutter:16},{default:o(()=>[l($,{id:"selectPanel",span:12,style:{"margin-left":"22vw",transition:"margin-left 0.5s ease-out"}},{default:o(()=>[s("div",qe,[l(k,{direction:"vertical",size:10,class:"QAShower"},{default:o(()=>[_.value!==void 0&&w.value!==void 0?(i(),r("div",Ge,[l(k,null,{default:o(()=>[l(W),s("span",Pe,n(L.value),1)]),_:1})])):v("",!0),_.value!==void 0?(i(),r("div",Fe,[l(k,{direction:"vertical",size:15,class:"added-div"},{default:o(()=>[t.value!==void 0?(i(),r("div",Qe,n(t.value[a.value].getPrompt()),1)):v("",!0),t.value!==void 0?(i(),r("div",He,[t.value[a.value].getAnswerGenerated()?(i(),r("div",{key:0,ref_key:"modelResponse",ref:M,class:"modelResponse"},n(t.value[a.value].getAnswer()),513)):v("",!0)])):v("",!0)]),_:1})])):v("",!0)]),_:1})])]),_:1}),l(ne,{name:"fade",onBeforeEnter:H,onEnter:O},{default:o(()=>[_.value!==void 0&&t.value!==void 0?(i(),E($,{span:12,key:"subPanel"},{default:o(()=>[s("div",Oe,n(e.$t("evaluation.question.type")),1),s("div",Ue,[(i(!0),r(ie,null,ue(t.value[a.value].subjects,(m,X)=>(i(),E(Y,{key:X,style:{margin:"6.5vh 0.5vw"},color:"arcoblue",size:"large"},{default:o(()=>[f(n(m),1)]),_:2},1024))),128))]),s("div",Je,n(e.$t("evaluation.credit")),1),l(Z,{count:10,style:{display:"flex","align-items":"center","justify-content":"center","margin-top":"8vh"},"model-value":S.value,onChange:F},null,8,["model-value"]),t.value!==void 0?(i(),r("div",Ke,n(`${a.value+1} / ${t.value.length}`),1)):v("",!0),t.value!==void 0?(i(),r("div",We,[l(p,{type:"outline",style:{margin:"auto 0.5vw"},onClick:P,disabled:t.value[a.value].getAnswerGenerated()},{default:o(()=>[t.value[a.value].getAnswerGenerated()?(i(),r("div",Ye,n(e.$t("evaluation.answer.generated")),1)):(i(),r("div",Ze,n(e.$t("evaluation.answer.generate")),1))]),_:1},8,["disabled"]),l(p,{type:"outline",style:{margin:"auto 0.5vw"},disabled:a.value===0,onClick:q},{default:o(()=>[f(n(e.$t("evaluation.question.last")),1)]),_:1},8,["disabled"]),l(p,{type:"outline",style:{margin:"auto 0.5vw"},disabled:a.value===t.value.length-1,onClick:G},{default:o(()=>[f(n(e.$t("evaluation.question.next")),1)]),_:1},8,["disabled"]),l(p,{type:"outline",style:{margin:"auto 0.5vw"},disabled:!t.value.every(m=>m.getScored()),onClick:Q},{default:o(()=>[f(n(e.$t("evaluation.credit.submit")),1)]),_:1},8,["disabled"])])):v("",!0)]),_:1})):v("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}});const mt=le(Xe,[["__scopeId","data-v-bfaf22be"]]);export{mt as default};
