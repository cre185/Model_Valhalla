import{d as B,r as A,j as v,a$ as oe,C as p,D as V,aI as o,aH as t,G as c,aN as i,aM as d,aF as h,aE as N,u as te,aK as se,aY as ae,ba as ne,b5 as ie,b6 as le,b7 as de,b9 as ce,b8 as me,bb as ue,g as pe,be as fe,bf as ge}from"./arco.a9e9ea8e.js";import{B as _e,_ as ve}from"./banner.bab2aea3.js";import{F as he}from"./index.fed99cd4.js";import{u as we,I as be,f as ye,h as $e,a as Ve,i as Ie,b as ke,c as Ce,j as Me,_ as U}from"./index.d740cb91.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               */import{f as Te,g as Se}from"./vue.6f0b04ed.js";import{u as xe}from"./loading.992f9f87.js";import"./chart.095b9a7e.js";const Ne={key:0,class:"register-form-type-selector"},Re={class:"register-form-type-selector-title"},Fe={key:1,class:"register-form-wrapper"},Pe={class:"register-form-title"},Ae={class:"register-form-error-msg"},Be={class:"register-form-password-actions"},Ue=B({__name:"register-form",setup(_){const I=Te(),w=A(""),{loading:R,setLoading:k}=xe(),C=we(),{proxy:n}=pe(),b=Se("register-config",{username:"",password:"",mobile:"",secret:""}),l=v({username:b.value.username,password:b.value.password,mobile:b.value.mobile,secret:b.value.secret}),M=v({acceptAgreement:!1}),T=v({passwordValidation:""}),y=v({code:""}),u=v({codeTimer:null,codeInterval:-1}),f=A(""),L=async({errors:e,values:r})=>{if(!R.value&&!e){k(!0);try{if(!M.acceptAgreement)throw new Error(n.$t("register.form.agreement.errMsg"));const s={mobile:l.mobile,code:y.code};await C.verifyCode(s),await C.register(r);const{redirect:m,...S}=I.currentRoute.value.query;I.push({name:m||"Login",query:{...S}})}catch(s){w.value=s.message}finally{k(!1)}}},q=async()=>{try{u.codeInterval=60,u.codeTimer=setInterval(()=>{u.codeInterval>=0?u.codeInterval-=1:clearInterval(u.codeTimer)},1e3);const e=await C.verifyPhone(l.mobile)}catch(e){w.value=e.message}finally{k(!1)}},z=e=>{M.acceptAgreement=e},E=[{validator:(e,r)=>new Promise(s=>{window.setTimeout(()=>{e===""?r(n.$t("register.form.userName.errMsg1")):e.length<6&&r(n.$t("register.form.userName.errMsg2")),s()},1e3)})}],j=[{validator:(e,r)=>new Promise(s=>{window.setTimeout(()=>{e===""?r(n.$t("register.form.password.errMsg1")):e.length<8&&r(n.$t("register.form.password.errMsg2")),s()},1e3)})}],D=[{validator:(e,r)=>new Promise(s=>{window.setTimeout(()=>{e=T.passwordValidation,e===""?r(n.$t("register.form.passwordValidation.errMsg1")):e!==l.password&&r(n.$t("register.form.passwordValidation.errMsg2")),s()},1e3)})}],G=[{validator:(e,r)=>new Promise(s=>{window.setTimeout(()=>{e===""?r(n.$t("register.form.phone.errMsg1")):/1[3,4,5,7,8][0-9]{9}/.test(e)||r(n.$t("register.form.phone.errMsg2")),s()},1e3)})}],H=[{required:!0,validator:(e,r)=>new Promise(s=>{window.setTimeout(()=>{e=y.code,e===""?r(n.$t("register.form.code.errMsg1")):/\d{6}/.test(e)||r(n.$t("register.form.code.errMsg2")),s()},1e3)}),trigger:["change","blur"]}],K=[{required:!0,validator:(e,r)=>new Promise(s=>{window.setTimeout(()=>{e===""?r(n.$t("register.form.adminCode.errMsg1")):e.length!==8&&r(n.$t("register.form.adminCode.errMsg2")),s()},1e3)}),trigger:["change","blur"]}];return(e,r)=>{const s=be,m=ae,S=ye,x=ne,Q=$e,Y=oe("router-link"),$=ie,g=le,J=Ve,F=de,O=Ie,W=ke,X=Ce,Z=Me,P=ce,ee=me,re=ue;return p(),V(se,null,[f.value===""?(p(),V("div",Ne,[o(x,{direction:"vertical",size:60,align:"center"},{default:t(()=>[c("div",Re,i(e.$t("register.form.typeSelector.title")),1),o(x,{size:"large"},{default:t(()=>[o(m,{type:"primary",shape:"round",class:"register-form-type-selector-user-btn",onClick:r[0]||(r[0]=a=>f.value="user")},{icon:t(()=>[o(s)]),default:t(()=>[d(" "+i(e.$t("register.form.user.buttonText")),1)]),_:1}),o(m,{type:"primary",shape:"round",class:"register-form-type-selector-admin-btn",onClick:r[1]||(r[1]=a=>f.value="administrator")},{icon:t(()=>[o(S)]),default:t(()=>[d(" "+i(e.$t("register.form.administrator.buttonText")),1)]),_:1})]),_:1}),o(Y,{to:"../login"},{default:t(()=>[o(m,{shape:"round"},{icon:t(()=>[o(Q)]),default:t(()=>[d(" "+i(e.$t("register.form.back.buttonText")),1)]),_:1})]),_:1})]),_:1})])):h("",!0),f.value!==""?(p(),V("div",Fe,[c("div",Pe,i(e.$t("register.form.title")),1),c("div",Ae,i(w.value),1),o(re,{ref:"registerForm",model:l,class:"register-form",layout:"vertical",onSubmit:L},{default:t(()=>[o(g,{field:"username",rules:E,"validate-trigger":["change","blur"],"hide-label":""},{default:t(()=>[o($,{modelValue:l.username,"onUpdate:modelValue":r[2]||(r[2]=a=>l.username=a),placeholder:e.$t("register.form.userName.placeholder")},{prefix:t(()=>[o(s)]),_:1},8,["modelValue","placeholder"])]),_:1}),o(g,{field:"password",rules:j,"validate-trigger":["change","blur"],"hide-label":""},{default:t(()=>[o(F,{modelValue:l.password,"onUpdate:modelValue":r[3]||(r[3]=a=>l.password=a),placeholder:e.$t("register.form.password.placeholder"),"allow-clear":""},{prefix:t(()=>[o(J)]),_:1},8,["modelValue","placeholder"])]),_:1}),o(g,{field:"check-password",rules:D,"validate-trigger":["change","blur"],"hide-label":""},{default:t(()=>[o(F,{modelValue:T.passwordValidation,"onUpdate:modelValue":r[4]||(r[4]=a=>T.passwordValidation=a),placeholder:e.$t("register.form.passwordValidation.placeholder"),"allow-clear":""},{prefix:t(()=>[o(O)]),_:1},8,["modelValue","placeholder"])]),_:1}),o(g,{field:"mobile",rules:G,"hide-label":""},{default:t(()=>[o($,{modelValue:l.mobile,"onUpdate:modelValue":r[5]||(r[5]=a=>l.mobile=a),placeholder:e.$t("register.form.phoneNumber.placeholder"),"allow-clear":""},{prefix:t(()=>[o(W)]),append:t(()=>[u.codeInterval<0?(p(),N(m,{key:0,type:"primary",onClick:q},{default:t(()=>[d(i(e.$t("register.form.code.buttonText1")),1)]),_:1})):h("",!0),u.codeInterval>=0?(p(),N(m,{key:1},{default:t(()=>[d(i(u.codeInterval+e.$t("register.form.code.buttonText2")),1)]),_:1})):h("",!0)]),_:1},8,["modelValue","placeholder"])]),_:1}),o(g,{field:"code",rules:H,"hide-label":""},{default:t(()=>[o($,{modelValue:y.code,"onUpdate:modelValue":r[6]||(r[6]=a=>y.code=a),placeholder:e.$t("register.form.code.placeholder"),"allow-clear":""},{prefix:t(()=>[o(X)]),_:1},8,["modelValue","placeholder"])]),_:1}),f.value==="administrator"?(p(),N(g,{key:0,field:"secret",rules:K,"hide-label":""},{default:t(()=>[o($,{modelValue:l.secret,"onUpdate:modelValue":r[7]||(r[7]=a=>l.secret=a),placeholder:e.$t("register.form.adminCode.placeholder"),"allow-clear":""},{prefix:t(()=>[o(Z)]),_:1},8,["modelValue","placeholder"])]),_:1})):h("",!0),o(x,{size:16,direction:"vertical"},{default:t(()=>[c("div",Be,[o(ee,{checked:"acceptAgreement","model-value":M.acceptAgreement,onChange:z},{default:t(()=>[d(i(e.$t("register.form.agreement"))+" ",1),o(P,null,{default:t(()=>[d(i(e.$t("register.form.agreementName")),1)]),_:1}),o(P,null,{default:t(()=>[d(i(e.$t("register.form.privacy")),1)]),_:1})]),_:1},8,["model-value"])]),o(m,{type:"primary","html-type":"submit",long:"",loading:te(R)},{default:t(()=>[d(i(e.$t("register.form.register")),1)]),_:1},8,["loading"]),o(m,{type:"text",long:"",class:"login-form-register-btn",onClick:r[8]||(r[8]=a=>f.value="")},{default:t(()=>[d(i(e.$t("register.form.return.btn")),1)]),_:1})]),_:1})]),_:1},8,["model"])])):h("",!0)],64)}}});const Le=U(Ue,[["__scopeId","data-v-2e7f68d3"]]),qe=_=>(fe("data-v-3d0dd3b3"),_=_(),ge(),_),ze={class:"container"},Ee=qe(()=>c("div",{class:"logo"},[c("img",{alt:"logo",src:ve}),c("div",{class:"logo-text"},"Model Valhalla")],-1)),je={class:"content"},De={class:"content-inner"},Ge={class:"footer"},He=B({__name:"index",setup(_){return(I,w)=>(p(),V("div",ze,[Ee,o(_e),c("div",je,[c("div",De,[o(Le)]),c("div",Ge,[o(he)])])]))}});const tr=U(He,[["__scopeId","data-v-3d0dd3b3"]]);export{tr as default};
