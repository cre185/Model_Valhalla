import{u as E,g as B,a6 as x,_ as A}from"./index.35e9d874.js";/* empty css              */import{d as L,r as y,w as z,C as _,aE as J,aH as e,aI as t,D as v,u as i,aF as j,G as c,aN as s,br as M,c4 as W,cd as G,ba as H,bV as Q,aM as l,bt as O,bu as R,n as K,bO as X,b5 as Y,b9 as Z,bP as ee,bQ as te,bR as ae,a$ as ne,bj as se,bk as oe}from"./arco.a9e9ea8e.js";/* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{u as le}from"./user-center.715d1d81.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               */import{f as re}from"./vue.6f0b04ed.js";import{u as ie}from"./user-info.2dac909f.js";import"./chart.095b9a7e.js";import"./model-list.f24c2e5d.js";const ue=["src"],ce=L({__name:"user-panel",props:["name"],setup(P){const o=E();o.setInfo(JSON.parse(localStorage.getItem("userStore")));const n=P,m=B(),p={uid:"-2",name:"avatar.png",url:o.avatar};y([{label:"userSetting.label.name",value:o.username},{label:"userSetting.label.accountId",value:o.accountId},{label:"userSetting.label.registrationDate",value:o.registrationDate}]);const g=y([p]),I=(r,d)=>{g.value=[d],o.setInfo({avatar:d.url}),localStorage.setItem("userStore",JSON.stringify(o.$state))},S=r=>{const d=new AbortController;return async function(){const{onProgress:f,onError:C,onSuccess:h,fileItem:w,name:k="file"}=r;f(20);const V=new FormData;V.append(k,w.file);try{const a=await le(V,m);h(a)}catch(a){C(a)}}(),{abort(){d.abort()}}};return z(()=>n.name,(r,d)=>{o.setInfo({username:r}),localStorage.setItem("userStore",JSON.stringify(o.$state))}),(r,d)=>{const $=x,f=M,C=W,h=G,w=H,k=Q;return _(),J(k,{bordered:!1},{default:e(()=>[t(w,{size:54},{default:e(()=>[t(C,{"custom-request":S,"list-type":"picture-card","file-list":g.value,"show-upload-button":!0,"show-file-list":!1,onChange:I},{"upload-button":e(()=>[t(f,{size:100,class:"info-avatar"},{"trigger-icon":e(()=>[t($)]),default:e(()=>[g.value.length?(_(),v("img",{key:0,alt:"\u7528\u6237\u5934\u50CF",src:i(o).avatar},null,8,ue)):j("",!0)]),_:1})]),_:1},8,["file-list"]),t(h,{id:"infoBar",column:2,align:"right",layout:"inline-horizontal","label-style":{width:"100px",fontWeight:"normal",color:"rgb(var(--gray-8))"},"value-style":{width:"300px",paddingLeft:"8px",textAlign:"left"}},{default:e(()=>[c("span",null,s(r.$t("userSetting.label.name"))+"\uFF1A"+s(i(o).username),1),c("span",null,s(r.$t("userSetting.label.accountId"))+"\uFF1A"+s(i(o).accountId),1),c("span",null,s(r.$t("userSetting.label.registrationDate"))+"\uFF1A"+s(i(o).registrationDate),1)]),_:1},8,["label-style"])]),_:1})]),_:1})}}});const de=A(ce,[["__scopeId","data-v-c0bde172"]]),_e={class:"content"},me={class:"operation"},pe={class:"content"},ge={class:"operation"},fe={class:"content"},Se={class:"operation"},he={key:0,class:"content"},be={key:1,class:"content"},ve={key:2,class:"operation"},ye={key:3,class:"operation"},Ie=L({__name:"security-settings",emits:["changeName"],setup(P,{emit:o}){const n=E();n.setInfo(JSON.parse(localStorage.getItem("userStore")));let m=n.username;const p=y(""),g=n.phone.slice(0,3),I="*".repeat(6),S=n.phone.slice(-2);p.value=`${g}${I}${S}`,B();const r=y(!1),d=o,$=y(),f=re(),C=()=>{r.value=!0,K(()=>{$.value.focus()})},h=()=>{r.value=!1;const a=n.username;a!==m&&(d("changeName",a),n.setInfo({username:a}),localStorage.setItem("userStore",JSON.stringify(n.$state)),m=a,ie(n.accountId,B(),{key:a},"username"))},w=()=>{f.push({name:"ChangeInfo",params:{toChange:"password",mobileReadOnly:1}})},k=()=>{f.push({name:"ChangeInfo",params:{toChange:"phone"}})},V=()=>{f.push({name:"ChangeInfo",params:{toChange:"email"}})};return(a,b)=>{const u=X,T=Y,N=Z,U=ee,D=te,q=ae;return _(),J(q,{bordered:!1,class:"list"},{default:e(()=>[t(D,null,{default:e(()=>[t(U,null,{title:e(()=>[t(u,null,{default:e(()=>[l(s(a.$t("userSetting.SecuritySettings.form.label.username")),1)]),_:1})]),description:e(()=>[c("div",_e,[O(t(T,{id:"input",ref_key:"inputRef",ref:$,modelValue:i(n).username,"onUpdate:modelValue":b[0]||(b[0]=F=>i(n).username=F),placeholder:i(n).username,onPressEnter:h,onBlur:h},null,8,["modelValue","placeholder"]),[[R,r.value]]),O(t(u,null,{default:e(()=>[l(s(i(n).username),1)]),_:1},512),[[R,!r.value]])]),c("div",me,[t(N,{onClick:C},{default:e(()=>[l(s(a.$t("userSetting.SecuritySettings.button.update")),1)]),_:1})])]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(U,null,{title:e(()=>[t(u,null,{default:e(()=>[l(s(a.$t("userSetting.SecuritySettings.form.label.password")),1)]),_:1})]),description:e(()=>[c("div",pe,[t(u,null,{default:e(()=>[l(s(a.$t("userSetting.SecuritySettings.placeholder.password")),1)]),_:1})]),c("div",ge,[t(N,{onClick:w},{default:e(()=>[l(s(a.$t("userSetting.SecuritySettings.button.update")),1)]),_:1})])]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(U,null,{title:e(()=>[t(u,null,{default:e(()=>[l(s(a.$t("userSetting.SecuritySettings.form.label.phone")),1)]),_:1})]),description:e(()=>[c("div",fe,[t(u,{modelValue:p.value,"onUpdate:modelValue":b[1]||(b[1]=F=>p.value=F)},{default:e(()=>[l(s(a.$t("userSetting.certification.button.bound")+p.value),1)]),_:1},8,["modelValue"])]),c("div",Se,[t(N,{onClick:k},{default:e(()=>[l(s(a.$t("userSetting.SecuritySettings.button.update")),1)]),_:1})])]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(U,null,{title:e(()=>[t(u,null,{default:e(()=>[l(s(a.$t("userSetting.SecuritySettings.form.label.email")),1)]),_:1})]),description:e(()=>[i(n).email?(_(),v("div",he,[t(u,{modelValue:i(n).email,"onUpdate:modelValue":b[2]||(b[2]=F=>i(n).email=F)},{default:e(()=>[l(s(a.$t("userSetting.certification.button.bound")+i(n).email),1)]),_:1},8,["modelValue"])])):(_(),v("div",be,[t(u,null,{default:e(()=>[l(s(a.$t("userSetting.certification.button.email.not_bound")),1)]),_:1})])),i(n).email?(_(),v("div",ve,[t(N,{onClick:V},{default:e(()=>[l(s(a.$t("userSetting.SecuritySettings.button.update")),1)]),_:1})])):(_(),v("div",ye,[t(N,{onClick:V},{default:e(()=>[l(s(a.$t("userSetting.SecuritySettings.button.update")),1)]),_:1})]))]),_:1})]),_:1})]),_:1})}}});const $e=A(Ie,[["__scopeId","data-v-0d08ba34"]]),Ce={class:"container"},we={name:"Setting"},ke=L({...we,setup(P){const o=y(""),n=m=>{o.value=m};return(m,p)=>{const g=ne("Breadcrumb"),I=se,S=oe;return _(),v("div",Ce,[t(g,{items:["menu.user","menu.user.setting"]},null,8,["items"]),t(S,{style:{"margin-bottom":"16px"}},{default:e(()=>[t(I,{span:24},{default:e(()=>[t(de,{name:o.value},null,8,["name"])]),_:1})]),_:1}),t(S,{class:"wrapper"},{default:e(()=>[t($e,{onChangeName:n})]),_:1})])}}});const Me=A(ke,[["__scopeId","data-v-051cce42"]]);export{Me as default};
